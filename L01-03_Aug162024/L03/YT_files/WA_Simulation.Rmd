---
title: "Work Along : Simulations"
author: "Dr. Uma Ravat"
date: "`r Sys.Date()`"
output:
  html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo = F}
bfcolor <- function(x, color) {
  if (knitr::is_latex_output()) {
    sprintf("\\textcolor{%s}{\\textbf{%s}}", color, x)
  } else if (knitr::is_html_output()) {
    sprintf("<span style='color: %s;'><b>%s</b></span>", color, x)
  } else x
}
```

##  Simulation

Simulation is powerful computational tool. Here we will consider a simulation based approach to probability. 

### Simulating tossing a coin

```{r coin}
coin <- sample(c("H", "T"), 1)
coin
```

```{r coin2}
coin2 <- sample(c("1", "0"), 1)
coin2
```

### Toss a coin 10 times

```{r}
(x <- sample(c("H", "T"), 10, replace = TRUE)) #10 coin tosses
```

```{r}
(x2 <- sample(c(1, 0), 10, replace = TRUE)) #10 coin tosses
```
###  Tabulate the result of tossing a coin 10 times. 


```{r }
table(x) # How many H vs T
```

```{r }
table(x2) # How many 0 vs 1
```

Based on tossing the coin 10 times, what is the chance of getting "H"? Does it agree with what you know as the probability of getting "H" when you toss a fair coin? 

```{r}
prop.table(table(x)) # Proportion of H vs T
```

```{r}
prop.table(table(x2)) # Proportion of 0 vs 1
```


### Visually display your toss of a coin 10 times. 

```{r}
barplot(table(x)) # visualize # of heads
```

```{r}
barplot(prop.table(table(x2))) # visualize Proportion of 0"s
```



## Simulating probabilities in R
**Example:** Probability of getting a "H" in tossing a fair coin

What happens with 100 coin tosses, 1000 coin tosses? 
```{r}
x<-sample( c("H", "T"), 100, replace = TRUE)
table(x)/100 #Estimated probabilities
```
```{r}
x<-sample( c("H", "T"), 1000, replace = TRUE)
table(x)/1000 # long-run average
```



### Simulation based approach to probability

What is the probability of getting "H" when you toss a fair coin? 

1. Repeat the  process of tossing a fair coin over and over again under identical conditions.
2. For each repetition of the process, note if a "H" was observed.

Probability (or chance) of getting a "H" is the fraction of the time the outcome "H" was observed. 

The probability (or chance) of an outcome is equal to: 
$$ \frac{\text{number of "H"}}{\text{number of repetitons}} $$

```{r}
nreps <- 1000
prob <- rep(0,nreps)
for(i in 1:nreps){
  coin <- sample(c(1, 0),replace = TRUE, i)
  prob[i] <- sum(coin)/i
}
prob[1:10]
prob[990:1000]
plot(1:nreps, prob, type='l')
```

Probability is the long range average number of "H" observed when the coin is tossed repeatedly under identical conditions. 

# Control structures and functions

## conditionals

```{r conditional}
x <- -5
if(x > 0){
print("Non-negative number")
} else {
print("Negative number")
}
```

## `for` loop 


```{r for-loop}
table.of.logarithms <- vector(length=10, mode="numeric") #empty/null vector
table.of.logarithms 

for (i in 1:length(table.of.logarithms)) {
  table.of.logarithms[i] <- log(i)
}

names(table.of.logarithms) <- 1:length(table.of.logarithms)
table.of.logarithms
```

## user-defined function

```{r function}
fahrenheit_to_centigrade <- function( temp_F ) {
  temp_C <- ((temp_F - 32) * (5/9))
  return(temp_C)
}

fahrenheit_to_centigrade(82)
```